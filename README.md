# èµ„æºä¸‹è½½ç«™

ä¸€ä¸ªåŸºäº TypeScript + Python + Docker çš„ç°ä»£åŒ–èµ„æºä¸‹è½½ç«™ï¼Œæ”¯æŒèµåŠ©è€…éªŒè¯å’Œä¸‹è½½é™é€ŸåŠŸèƒ½ã€‚
![image](https://github.com/user-attachments/assets/9a4f3156-21a2-41e1-9cea-8b65b308e542)

## åŠŸèƒ½ç‰¹æ€§

### å‰ç«¯åŠŸèƒ½
- ğŸ¨ ç°ä»£åŒ–å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…ç§»åŠ¨ç«¯
- ğŸ”‘ èµåŠ©è€…å¯†é’¥éªŒè¯ç•Œé¢
- ğŸ“± ç§»åŠ¨ç«¯å‹å¥½çš„ç”¨æˆ·ç•Œé¢
- ğŸš€ åŸºäº React + TypeScript + Tailwind CSS
- ğŸ“¦ èµ„æºåˆ†ç±»å±•ç¤ºå’Œæœç´¢
- ğŸ’« æµç•…çš„åŠ¨ç”»æ•ˆæœå’Œç”¨æˆ·ä½“éªŒ

### åç«¯åŠŸèƒ½
- ğŸ—ƒï¸ JSON æ–‡ä»¶å­˜å‚¨èµ„æºä¿¡æ¯
- ğŸ” èµåŠ©è€…å¯†é’¥éªŒè¯ç³»ç»Ÿ
- ğŸš¦ IP é™é€Ÿæ§åˆ¶ï¼ˆéèµåŠ©è€… 10Mbpsï¼‰
- âš¡ èµåŠ©è€…æ— é™é€Ÿä¸‹è½½
- ğŸ“Š ä¸‹è½½ç»Ÿè®¡å’Œç›‘æ§
- ğŸ åŸºäº Flask + Python

### éƒ¨ç½²åŠŸèƒ½
- ğŸ³ å®Œæ•´çš„ Docker å®¹å™¨åŒ–éƒ¨ç½²
- ğŸ”„ Nginx åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡
- ğŸ“ˆ å¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨é‡å¯
- ğŸ”§ ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–é…ç½®

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **æ ·å¼**: Tailwind CSS
- **å›¾æ ‡**: Lucide React
- **é€šçŸ¥**: React Hot Toast
- **HTTPå®¢æˆ·ç«¯**: Axios

### åç«¯
- **æ¡†æ¶**: Flask + Python 3.11
- **è·¨åŸŸ**: Flask-CORS
- **HTTPå®¢æˆ·ç«¯**: Requests
- **æ–‡ä»¶å¤„ç†**: Werkzeug

### éƒ¨ç½²
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **åå‘ä»£ç†**: Nginx
- **è¿›ç¨‹ç®¡ç†**: Docker å¥åº·æ£€æŸ¥

## é¡¹ç›®ç»“æ„

```
ä¸‹è½½ç«™/
â”œâ”€â”€ backend/                 # åç«¯ Python åº”ç”¨
â”‚   â”œâ”€â”€ app.py              # Flask ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ resources.json      # èµ„æºé…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt    # Python ä¾èµ–
â”‚   â””â”€â”€ Dockerfile         # åç«¯å®¹å™¨é…ç½®
â”œâ”€â”€ frontend/               # å‰ç«¯ React åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx        # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ api.ts         # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ types.ts       # TypeScript ç±»å‹
â”‚   â”‚   â”œâ”€â”€ main.tsx       # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ index.css      # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ package.json       # å‰ç«¯ä¾èµ–
â”‚   â”œâ”€â”€ vite.config.ts     # Vite é…ç½®
â”‚   â”œâ”€â”€ tailwind.config.js # Tailwind é…ç½®
â”‚   â””â”€â”€ Dockerfile         # å‰ç«¯å®¹å™¨é…ç½®
â”œâ”€â”€ nginx/                  # Nginx é…ç½®
â”‚   â”œâ”€â”€ nginx.conf         # ä¸»é…ç½®
â”‚   â””â”€â”€ default.conf       # ç«™ç‚¹é…ç½®
â”œâ”€â”€ files/                  # ä¸‹è½½æ–‡ä»¶å­˜å‚¨ç›®å½•
â”œâ”€â”€ docker-compose.yml      # Docker ç¼–æ’é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Docker 20.0+
- Docker Compose 2.0+

### éƒ¨ç½²æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd ä¸‹è½½ç«™
```

2. **å‡†å¤‡ä¸‹è½½æ–‡ä»¶**
```bash
# åˆ›å»ºæ–‡ä»¶å­˜å‚¨ç›®å½•
mkdir -p files

# å°†è¦æä¾›ä¸‹è½½çš„æ–‡ä»¶æ”¾å…¥ files ç›®å½•
cp your-files/* files/
```

3. **é…ç½®èµ„æºä¿¡æ¯**
ç¼–è¾‘ `backend/resources.json` æ–‡ä»¶ï¼Œé…ç½®å¯ä¸‹è½½çš„èµ„æºï¼š
```json
[
  {
    "file_path": "/app/files/your-file.zip",
    "display_name": "æ˜¾ç¤ºåç§°.zip",
    "category": "è½¯ä»¶å·¥å…·",
    "description": "æ–‡ä»¶æè¿°ä¿¡æ¯",
    "image": "/static/images/icon.png"
  }
]
```

4. **å¯åŠ¨æœåŠ¡**
```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d --build

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

5. **è®¿é—®åº”ç”¨**
- å‰ç«¯ç•Œé¢: http://localhost
- åç«¯API: http://localhost/api
- ç›´æ¥å‰ç«¯: http://localhost:3000
- ç›´æ¥åç«¯: http://localhost:5000

### å¼€å‘æ¨¡å¼

**åç«¯å¼€å‘**
```bash
cd backend
pip install -r requirements.txt
python app.py
```

**å‰ç«¯å¼€å‘**
```bash
cd frontend
npm install
npm run dev
```

## é…ç½®è¯´æ˜

### èµåŠ©è€…éªŒè¯

ç³»ç»Ÿä¼šå‘ `http://82.156.35.55:5001/verify` å‘é€éªŒè¯è¯·æ±‚ï¼Œè¯·æ±‚å¤´åŒ…å«ç”¨æˆ·è¾“å…¥çš„å¯†é’¥ï¼š

```python
headers = {
    'key': 'ç”¨æˆ·è¾“å…¥çš„å¯†é’¥',
    'User-Agent': 'DownloadStation/1.0.0',
    'Accept': '*/*',
    'Connection': 'keep-alive'
}
```

### ä¸‹è½½é™é€Ÿ

- **éèµåŠ©è€…**: é™åˆ¶ä¸‹è½½é€Ÿåº¦ä¸º 10Mbps
- **èµåŠ©è€…**: éªŒè¯æˆåŠŸåæ— é™é€Ÿä¸‹è½½
- **IPç»Ÿè®¡**: æŒ‰IPåœ°å€è¿›è¡Œæµé‡ç»Ÿè®¡å’Œé™é€Ÿ

### èµ„æºç®¡ç†

åœ¨ `backend/resources.json` ä¸­é…ç½®å¯ä¸‹è½½çš„èµ„æºï¼š

```json
{
  "file_path": "/app/files/æ–‡ä»¶å.zip",     // æ–‡ä»¶åœ¨å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„
  "display_name": "ç”¨æˆ·çœ‹åˆ°çš„æ–‡ä»¶å.zip",    // æ˜¾ç¤ºç»™ç”¨æˆ·çš„æ–‡ä»¶å
  "category": "è½¯ä»¶å·¥å…·",                   // èµ„æºåˆ†ç±»
  "description": "è¯¦ç»†çš„æ–‡ä»¶æè¿°ä¿¡æ¯",       // æ–‡ä»¶æè¿°
  "image": "/static/images/icon.png"      // å›¾æ ‡è·¯å¾„ï¼ˆå¯é€‰ï¼‰
}
```

## ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs backend
docker-compose logs frontend
docker-compose logs nginx

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart backend
```

### æ›´æ–°åº”ç”¨
```bash
# åœæ­¢æœåŠ¡
docker-compose down

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build
```

### å¤‡ä»½æ•°æ®
```bash
# å¤‡ä»½èµ„æºé…ç½®
cp backend/resources.json backup/

# å¤‡ä»½ä¸‹è½½æ–‡ä»¶
cp -r files/ backup/
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**
   - ä¿®æ”¹ `docker-compose.yml` ä¸­çš„ç«¯å£æ˜ å°„
   - ç¡®ä¿ 80ã€3000ã€5000 ç«¯å£æœªè¢«å ç”¨

2. **æ–‡ä»¶ä¸‹è½½å¤±è´¥**
   - æ£€æŸ¥ `files/` ç›®å½•ä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”æ–‡ä»¶
   - ç¡®è®¤ `resources.json` ä¸­çš„è·¯å¾„é…ç½®æ­£ç¡®
   - æŸ¥çœ‹åç«¯æ—¥å¿—æ’æŸ¥é”™è¯¯

3. **èµåŠ©è€…éªŒè¯å¤±è´¥**
   - ç¡®è®¤éªŒè¯æœåŠ¡å™¨ `http://82.156.35.55:5001/verify` å¯è®¿é—®
   - æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®

4. **å‰ç«¯æ— æ³•è®¿é—®åç«¯**
   - æ£€æŸ¥ Docker ç½‘ç»œé…ç½®
   - ç¡®è®¤ Nginx ä»£ç†é…ç½®æ­£ç¡®

### æ€§èƒ½ä¼˜åŒ–

1. **å¢åŠ å¹¶å‘å¤„ç†èƒ½åŠ›**
   - è°ƒæ•´ Nginx worker è¿›ç¨‹æ•°
   - å¢åŠ  Flask åº”ç”¨å®ä¾‹

2. **ä¼˜åŒ–ä¸‹è½½é€Ÿåº¦**
   - è°ƒæ•´ `CHUNK_SIZE` å‚æ•°
   - ä¼˜åŒ–ç½‘ç»œå’Œç£ç›˜IO

3. **å‡å°‘å†…å­˜ä½¿ç”¨**
   - å¯ç”¨ Nginx gzip å‹ç¼©
   - ä¼˜åŒ–é™æ€èµ„æºç¼“å­˜

## å®‰å…¨æ³¨æ„äº‹é¡¹

1. **æ–‡ä»¶å®‰å…¨**
   - å®šæœŸæ‰«æä¸Šä¼ çš„æ–‡ä»¶
   - é™åˆ¶æ–‡ä»¶ç±»å‹å’Œå¤§å°
   - ä½¿ç”¨å®‰å…¨çš„æ–‡ä»¶å­˜å‚¨è·¯å¾„

2. **è®¿é—®æ§åˆ¶**
   - é…ç½®é˜²ç«å¢™è§„åˆ™
   - å¯ç”¨ HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
   - å®šæœŸæ›´æ–°ä¾èµ–åŒ…

3. **ç›‘æ§å‘Šè­¦**
   - ç›‘æ§ä¸‹è½½æµé‡å’Œé¢‘ç‡
   - è®¾ç½®å¼‚å¸¸è®¿é—®å‘Šè­¦
   - è®°å½•è¯¦ç»†çš„è®¿é—®æ—¥å¿—
